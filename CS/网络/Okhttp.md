[[Okhttp]]是一个基于[[TCP]]连接使用[[Http]]协议支持WebSocket的[[网络]]库
### Okhttp及网络架构搭建

	Okhttp是一个常用的http库，适用于处理网络请求，连接管理、缓存、响应解析，retrofit是基于okhttp的封装，简化API接口，使之更易用。

	关于okhttp的工作原理，通过构建拦截器链来拦截和修改请求和响应，retofit会将请求的部分封装成一个okhttp request交由okhttp处理，okhttp通过拦截器来修改请求、添加认证、记录日志、缓存响应。

	可以通过connectPool配置连接池，连接池允许okhttp重用已经建立的tcp连接，通过它可以避免每次请求的重新建立连接，提高性能。

	关于框架封装，首先要考虑复用性、简化配置、易于扩展，而且要保证可移植性，能做到把这个模块移到别的项目中可以直接使用，保证对不同项目的兼容性。

	封装时，首先要捋出执行一次请求的流程，首先是Retrofit实例的管理，包括一些okhttp常用的配置，暴露一个Config类供用户跟更改配置和扩展配置。其次就是对常用请求方法的封装，GET、POST、数据流，然后提供一个解析类，适配json、map请求体。其次就是对响应后数据的处理，保证兼容性。对线程的处理，保证一般情况下使用者不需要太多精力放在线程上。对数据解析的处理，基于ali的fastjson封装了一个JSON解析类。